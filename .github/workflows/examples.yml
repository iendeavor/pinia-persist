name: Examples

on: [push, pull_request]

jobs:
  npm-8-node-16:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        example-directory:
          - examples/nuxt-2-client-example
          - examples/nuxt-bridge-example

    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: 16

      - run: cd ${{matrix.example-directory}} && npm ci && npm run build

  npm-8-node-18:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        example-directory:
          - examples/nuxt-3-universal-example

    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: 18

      - run: cd ${{matrix.example-directory}} && npm ci && npm run build

  pnpm-7-node-16:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        example-directory:
          - examples/vue-2-example

    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: 16

      - uses: pnpm/action-setup@v2.0.1
        with:
          version: 7

      - run: cd ${{matrix.example-directory}} && pnpm i && pnpm run build

  pnpm-7-node-18:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        example-directory:
          - examples/ionic-capacitor-preferences
          - examples/localforage-example
          # - examples/pinia-orm-example
          - examples/quasar-example
          - examples/vite-plugin-ssr-example
          - examples/vue-3-example

    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: 18

      - uses: pnpm/action-setup@v2.0.1
        with:
          version: 7

      - run: cd ${{matrix.example-directory}} && pnpm i && pnpm run build
